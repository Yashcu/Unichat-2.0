import{e as c,r as a,u as v,j as t}from"./index-B1mjx8Bh.js";const b=()=>c.get("/calendar"),f=s=>c.post("/calendar",s),j=s=>c.delete(`/calendar/${s}`),y=()=>{const[s,h]=a.useState([]),[d,o]=a.useState(""),[n,i]=a.useState(""),[m,r]=a.useState(""),{user:x}=v(),l=async()=>{try{const e=await b();h(e.data)}catch{r("Failed to fetch events.")}};a.useEffect(()=>{l()},[]);const u=async e=>{if(e.preventDefault(),!(!d.trim()||!n))try{await f({title:d,date:n}),o(""),i(""),l()}catch{r("Failed to create event.")}},p=async e=>{try{await j(e),l()}catch{r("Failed to delete event.")}};return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow h-full",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Academic Calendar"}),m&&t.jsx("p",{className:"text-red-500",children:m}),t.jsxs("form",{onSubmit:u,className:"mb-6 p-4 border rounded-md",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Add New Event"}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("input",{type:"text",value:d,onChange:e=>o(e.target.value),placeholder:"Event Title",className:"flex-grow border rounded-md p-2"}),t.jsx("input",{type:"date",value:n,onChange:e=>i(e.target.value),className:"border rounded-md p-2"}),t.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"Add Event"})]})]}),t.jsx("div",{className:"space-y-3",children:s.length>0?s.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-gray-50 border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.title}),t.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(e.date).toLocaleDateString()," - (Created by: ",e.createdBy.name,")"]})]}),(x.id===e.createdBy._id||x.role==="admin")&&t.jsx("button",{onClick:()=>p(e._id),className:"text-red-500 hover:text-red-700",children:"Delete"})]},e._id)):t.jsx("p",{children:"No events scheduled."})})]})};export{y as default};
